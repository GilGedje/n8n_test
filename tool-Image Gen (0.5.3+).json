[{"id":"3d7330b2-41eb-43c0-9a14-a6a831dc9296","userId":"937b18cd-3dff-4680-a0c7-37eedb47cfe3","tool":{"id":"image_gen","name":"Image Gen (0.5.3+)","meta":{"description":"This tool generates images based on text prompts using the built-in methods of Open WebUI. Setup your image generation engine in Admin Settings > Images","manifest":{"title":"Image Gen","author":"open-webui","author_url":"https://github.com/open-webui","funding_url":"https://github.com/open-webui","version":"0.1","required_open_webui_version":"0.5.3"}},"content":"\"\"\"\ntitle: Image Gen\nauthor: open-webui\nauthor_url: https://github.com/open-webui\nfunding_url: https://github.com/open-webui\nversion: 0.1\nrequired_open_webui_version: 0.5.3\n\"\"\"\n\nimport os\nimport requests\nfrom datetime import datetime\nfrom typing import Callable\nfrom fastapi import Request\n\nfrom open_webui.routers.images import image_generations, GenerateImageForm\nfrom open_webui.models.users import Users\n\n\nclass Tools:\n    def __init__(self):\n        pass\n\n    async def generate_image(\n        self, prompt: str, __request__: Request, __user__: dict, __event_emitter__=None\n    ) -> str:\n        \"\"\"\n        Generate an image given a prompt\n\n        :param prompt: prompt to use for image generation\n        \"\"\"\n\n        await __event_emitter__(\n            {\n                \"type\": \"status\",\n                \"data\": {\"description\": \"Generating an image\", \"done\": False},\n            }\n        )\n\n        try:\n            images = await image_generations(\n                request=__request__,\n                form_data=GenerateImageForm(**{\"prompt\": prompt}),\n                user=Users.get_user_by_id(__user__[\"id\"]),\n            )\n            await __event_emitter__(\n                {\n                    \"type\": \"status\",\n                    \"data\": {\"description\": \"Generated an image\", \"done\": True},\n                }\n            )\n\n            for image in images:\n                await __event_emitter__(\n                    {\n                        \"type\": \"message\",\n                        \"data\": {\"content\": f\"![Generated Image]({image['url']})\"},\n                    }\n                )\n\n            return f\"Notify the user that the image has been successfully generated\"\n\n        except Exception as e:\n            await __event_emitter__(\n                {\n                    \"type\": \"status\",\n                    \"data\": {\"description\": f\"An error occured: {e}\", \"done\": True},\n                }\n            )\n\n            return f\"Tell the user: {e}\"\n"},"info":{},"downloads":16412,"upvotes":0,"downvotes":0,"updatedAt":1735442965,"createdAt":1721567942,"user":{"id":"937b18cd-3dff-4680-a0c7-37eedb47cfe3","username":"justinrahb","name":"","createdAt":1719521880,"role":"mod","verified":false}}]